# Author: petter.strandmark@gmail.com (Petter Strandmark)

configure_file(test_problem1.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem1.txt COPYONLY)
configure_file(test_problem2.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem2.txt COPYONLY)
configure_file(test_problem3.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem3.txt COPYONLY)
configure_file(test_problem4.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem4.txt COPYONLY)
configure_file(test_problem5.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem5.txt COPYONLY)
configure_file(test_problem6.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem6.txt COPYONLY)
configure_file(test_problem7.txt ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem7.txt COPYONLY)

FILE(WRITE ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh
"exec $1 < $2\n")

ADD_TEST(NAME test_problem1 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem1.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

ADD_TEST(NAME test_problem2 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem2.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

ADD_TEST(NAME test_problem3 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem3.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

ADD_TEST(NAME test_problem4 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem4.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

ADD_TEST(NAME test_problem5 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem5.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

ADD_TEST(NAME test_problem6 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem6.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

ADD_TEST(NAME test_problem7 COMMAND sh ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/main.sh "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/qepcad" "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test_problem7.txt" WORKING_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
